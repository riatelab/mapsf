<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>mapsf • mapsf</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="mapsf">
<meta property="og:description" content="mapsf">
<meta property="og:image" content="/reference/figures/logo.png">
<meta property="og:image:alt" content="mapsf: thematic cartography">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@rgeomatic">
<meta name="twitter:site" content="@rgeomatic">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mapsf</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/mapsf.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/web_only/cheat_sheet.html">Cheat Sheet</a>
    </li>
    <li>
      <a href="../articles/web_only/how_to_create_faceted_maps.html">How to Create Faceted Maps</a>
    </li>
    <li>
      <a href="../articles/web_only/how_to_create_inset_maps.html">How to Create Inset Maps</a>
    </li>
    <li>
      <a href="../articles/web_only/how_to_export_maps.html">How to Export Maps</a>
    </li>
    <li>
      <a href="../articles/web_only/how_to_use_a_custom_font_family.html">How to Use a Custom Font Family</a>
    </li>
    <li>
      <a href="../articles/web_only/how_to_use_themes.html">How to Use Themes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/riatelab/mapsf/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>mapsf</h1>
                        <h4 data-toc-skip class="author">Timothée
Giraud</h4>
            
            <h4 data-toc-skip class="date">2022-11-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/riatelab/mapsf/blob/HEAD/vignettes/mapsf.Rmd" class="external-link"><code>vignettes/mapsf.Rmd</code></a></small>
      <div class="hidden name"><code>mapsf.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The aim of <code>mapsf</code> is to obtain thematic maps with the
visual quality of those build with a classical mapping or GIS
software.</p>
<p>Users of the package could belong to one of two categories:
cartographers willing to use R or R users willing to create maps.
Therefore, its functions have to be intuitive to cartographers and
ensure compatibility with common R workflows.</p>
<p><code>mapsf</code> uses <a href="https://CRAN.R-project.org/package=sf" class="external-link"><code>sf</code></a> objects
to produce <code>base</code> graphics.</p>
<p><code>mapsf</code> functions can be classified in the following
categories :</p>
<ul>
<li>
<p><strong>Symbology</strong><br><code><a href="../reference/mf_map.html">mf_map()</a></code> displays map layers on a georeferenced plot. It
has three main arguments:</p>
<ul>
<li>
<code>x</code>, an <code>sf</code> object;</li>
<li>
<code>var</code>, the name(s) of a variable(s) to map;</li>
<li>
<code>type</code>, the map layer type.</li>
</ul>
<p>Many parameters are available to fine tune the cartographic
representations. These parameters are the common ones found in GIS and
automatic cartography tools (e.g. classification and color palettes used
in choropleth maps, symbols sizes used in proportional symbols
maps…).</p>
</li>
<li><p><strong>Map Layout</strong><br>
Along with the cartographic functions, some other functions are
dedicated to layout design (e.g. legends, scale bar, north arrow, title,
credits…).</p></li>
<li><p><strong>Utility Functions</strong><br>
A set of functions is dedicated to the creation of spatial objects
(e.g. links creation) or other utility tasks (e.g. color palette
management, class intervals extraction, sample dataset
import…).</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="main-features">Main Features<a class="anchor" aria-label="anchor" href="#main-features"></a>
</h2>
<div class="section level3">
<h3 id="symbology">Symbology<a class="anchor" aria-label="anchor" href="#symbology"></a>
</h3>
<p>The <strong>type</strong> column indicates the value to use for the
<code>type</code> argument in <code>mf_map(x, var, type)</code>. The
<strong>data</strong> column displays the relevant data types for each
map types. The <strong>cartography</strong> column indicates the
corresponding function in <code>cartography</code>.</p>
<table style="width:96%;" class="table">
<colgroup>
<col width="18%">
<col width="9%">
<col width="11%">
<col width="13%">
<col width="14%">
<col width="12%">
<col width="16%">
<col width="0%">
</colgroup>
<thead><tr class="header">
<th>map type</th>
<th>type</th>
<th>data</th>
<th>polygon</th>
<th>point</th>
<th>line</th>
<th>cartography</th>
<th></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Base Map</td>
<td><code>"base"</code></td>
<td>geometry</td>
<td><img src="fig/poly.svg"></td>
<td><img src="fig/point.svg"></td>
<td><img src="fig/line.svg"></td>
<td>-</td>
<td></td>
</tr>
<tr class="even">
<td>Proportional Symbols</td>
<td><code>"prop"</code></td>
<td>stock</td>
<td><img src="fig/poly_p.svg"></td>
<td><img src="fig/point_p.svg"></td>
<td><img src="fig/line_p.svg"></td>
<td><code>propSymbolsLayer()</code></td>
<td></td>
</tr>
<tr class="odd">
<td>Typology</td>
<td><code>"typo"</code></td>
<td>category</td>
<td><img src="fig/poly_t.svg"></td>
<td><img src="fig/point_t.svg"></td>
<td><img src="fig/line_t.svg"></td>
<td><code>typoLayer()</code></td>
<td></td>
</tr>
<tr class="even">
<td>Choropleth</td>
<td><code>"choro"</code></td>
<td>ratio</td>
<td><img src="fig/poly_c.svg"></td>
<td><img src="fig/point_c.svg"></td>
<td><img src="fig/line_c.svg"></td>
<td><code>choroLayer()</code></td>
<td></td>
</tr>
<tr class="odd">
<td>Graduated Symbols</td>
<td><code>"grad"</code></td>
<td>stock</td>
<td><img src="fig/poly_g.svg"></td>
<td><img src="fig/point_g.svg"></td>
<td><img src="fig/line_g.svg"></td>
<td>-</td>
<td></td>
</tr>
<tr class="even">
<td>Symbols</td>
<td><code>"symb"</code></td>
<td>category</td>
<td><img src="fig/poly_s.svg"></td>
<td><img src="fig/point_s.svg"></td>
<td></td>
<td>-</td>
<td></td>
</tr>
<tr class="odd">
<td>Proportional Symbols + Typo</td>
<td><code>"prop_typo"</code></td>
<td>stock &amp; category</td>
<td><img src="fig/poly_pt.svg"></td>
<td><img src="fig/point_pt.svg"></td>
<td colspan="3">
<img src="fig/line_pt.svg"> |
<code>propSymbolsTypoLayer()</code>
</td>
</tr>
<tr class="even">
<td>Proportional Symbols + Choro</td>
<td><code>"prop_choro"</code></td>
<td>stock &amp; ratio</td>
<td><img src="fig/poly_pc.svg"></td>
<td><img src="fig/point_pc.svg"></td>
<td></td>
<td><code>propSymbolsChoroLayer()</code></td>
<td></td>
</tr>
<tr class="odd">
<td>Symbols + Choro</td>
<td><code>"symb_choro"</code></td>
<td>category &amp; ratio</td>
<td><img src="fig/poly_sc.svg"></td>
<td><img src="fig/point_sc.svg"></td>
<td></td>
<td>-</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="map-layout">Map Layout<a class="anchor" aria-label="anchor" href="#map-layout"></a>
</h3>
<table class="table"><tbody><tr class="odd">
<td align="center"><img src="fig/deco.svg" style="width:4in"></td>
</tr></tbody></table>
<table class="table">
<thead><tr class="header">
<th>name</th>
<th>cartography</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="../reference/mf_title.html">mf_title()</a></code></td>
<td>- / <code>layoutLayer()</code>
</td>
</tr>
<tr class="even">
<td><code><a href="../reference/mf_arrow.html">mf_arrow()</a></code></td>
<td><code><a href="https://rdrr.io/pkg/terra/man/north.html" class="external-link">north()</a></code></td>
</tr>
<tr class="odd">
<td><code><a href="../reference/mf_credits.html">mf_credits()</a></code></td>
<td>- / <code>layoutLayer()</code>
</td>
</tr>
<tr class="even">
<td><code><a href="../reference/mf_scale.html">mf_scale()</a></code></td>
<td><code>barscale()</code></td>
</tr>
<tr class="odd">
<td><code><a href="../reference/mf_layout.html">mf_layout()</a></code></td>
<td><code>layoutLayer()</code></td>
</tr>
<tr class="even">
<td><code><a href="../reference/mf_annotation.html">mf_annotation()</a></code></td>
<td>-</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/mf_label.html">mf_label()</a></code></td>
<td><code>labelLayer()</code></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="themes">Themes<a class="anchor" aria-label="anchor" href="#themes"></a>
</h3>
<p><code><a href="../reference/mf_theme.html">mf_theme()</a></code> defines a map theme. It sets the margins of
the figure, a background color, a foreground color and some parameters
of the title. A set of theme is included in the package and it is
possible to create custom ones.</p>
<table class="table">
<colgroup>
<col width="32%">
<col width="35%">
<col width="32%">
</colgroup>
<tbody>
<tr class="odd">
<td align="center"><img src="fig/th_default.svg" style="width:2in"></td>
<td align="center"><img src="fig/th_agolalight.svg" style="width:2in"></td>
<td align="center"><img src="fig/th_brutal.svg" style="width:2in"></td>
</tr>
<tr class="even">
<td align="center"><img src="fig/th_candy.svg" width="192"></td>
<td align="center"><img src="fig/th_dark.svg" width="192"></td>
<td align="center"><img src="fig/th_darkula.svg" width="192"></td>
</tr>
<tr class="odd">
<td align="center"><img src="fig/th_green.svg" width="192"></td>
<td align="center"><img src="fig/th_iceberg.svg" width="192"></td>
<td align="center"><img src="fig/th_ink.svg" width="192"></td>
</tr>
<tr class="even">
<td align="center"><img src="fig/th_jsk.svg" width="192"></td>
<td align="center"><img src="fig/th_nevermind.svg" width="192"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="export">Export<a class="anchor" aria-label="anchor" href="#export"></a>
</h3>
<p>The <code><a href="../reference/mf_export.html">mf_export()</a></code> function exports maps in raster (.png)
or vector formats (.svg). The size of the exported map will fit the
height/width ratio of a spatial object.</p>
</div>
<div class="section level3">
<h3 id="datasets">Datasets<a class="anchor" aria-label="anchor" href="#datasets"></a>
</h3>
<p>Several datasets are embedded in the package:</p>
<ul>
<li>
<p>A <a href="https://www.geopackage.org/" class="external-link">GeoPackage</a> of
Martinique municipalities can be imported with <code><a href="../reference/mf_get_mtq.html">mf_get_mtq()</a></code>
(or via <code><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">sf::st_read()</a></code>).</p>
<ul>
<li><p>Sources: <a href="https://www.insee.fr/fr/statistiques/2521169" class="external-link">Base comparateur de
territoires</a> (upload date: 2018-09-25) &amp; ADMIN EXPRESS-COG (2018
edition).</p></li>
<li><p>Citation: Insee and IGN, 2018</p></li>
<li>
<p>Fields:</p>
<ul>
<li>
<strong>INSEE_COM</strong>: Municipality identifier</li>
<li>
<strong>STATUS</strong>: Municipality administrative status</li>
<li>
<strong>LIBGEO</strong>: Municipality name</li>
<li>
<strong>POP</strong>: Total population, 2015</li>
<li>
<strong>MED</strong>: Median disposable income adjusted per
equivalent household member, in euros, 2015</li>
<li>
<strong>CHOM</strong>: Unemployed population, 2015</li>
<li>
<strong>ACT</strong>: Active population, 2015</li>
</ul>
</li>
</ul>
</li>
<li>
<p>A csv file of professional mobility flows between Martinique
municipalities.</p>
<ul>
<li><p>Sources: <a href="https://www.insee.fr/fr/statistiques/3566477" class="external-link">Flux de mobilité -
déplacements domicile-lieu de travail</a> (upload date:
2018-08-01)</p></li>
<li><p>Citation: Insee, 2018</p></li>
<li>
<p>Fields:</p>
<ul>
<li>
<strong>i</strong>: Municipality of residence identifier</li>
<li>
<strong>j</strong>: Municipality of workplace identifier</li>
<li>
<strong>fij</strong>: Flows of workers (employed population, 15 y.o.
or more, 2015, only flows &gt; 100)</li>
<li>
<strong>sj</strong>: Administrative status of the workplace
municipality</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="examples-of-thematic-maps">Examples of thematic maps<a class="anchor" aria-label="anchor" href="#examples-of-thematic-maps"></a>
</h2>
<div class="section level3">
<h3 id="base-map">Base map<a class="anchor" aria-label="anchor" href="#base-map"></a>
</h3>
<p><code><a href="../reference/mf_init.html">mf_init()</a></code> is designed to initiate a map centered on a
specific extent (<code>x</code> bbox). The <code>theme</code> argument
allows to select a theme.</p>
<p><code><a href="../reference/mf_shadow.html">mf_shadow()</a></code> plots the shadow of a polygon layer.</p>
<p><code>mf_map(x, type = "base")</code> displays <code>sf</code>
objects geometries.</p>
<p><code><a href="../reference/mf_layout.html">mf_layout()</a></code> add a complete layout to the map (title,
credits, north arrow, scale bar). Each layout elements can also be set
separately (with <code><a href="../reference/mf_title.html">mf_title()</a></code>, <code><a href="../reference/mf_credits.html">mf_credits()</a></code>,
<code><a href="../reference/mf_arrow.html">mf_arrow()</a></code> and <code><a href="../reference/mf_scale.html">mf_scale()</a></code>).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/riatelab/mapsf/" class="external-link">mapsf</a></span><span class="op">)</span></span>
<span><span class="co"># import the sample data set</span></span>
<span><span class="va">mtq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mf_get_mtq.html">mf_get_mtq</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># Initiate a base map</span></span>
<span><span class="fu"><a href="../reference/mf_init.html">mf_init</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mtq</span>, theme <span class="op">=</span> <span class="st">"iceberg"</span><span class="op">)</span></span>
<span><span class="co"># Plot a shadow</span></span>
<span><span class="fu"><a href="../reference/mf_shadow.html">mf_shadow</a></span><span class="op">(</span><span class="va">mtq</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># plot municipalities</span></span>
<span><span class="fu"><a href="../reference/mf_map.html">mf_map</a></span><span class="op">(</span><span class="va">mtq</span>, type <span class="op">=</span> <span class="st">"base"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># layout</span></span>
<span><span class="fu"><a href="../reference/mf_layout.html">mf_layout</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"Martinique"</span>,</span>
<span>  credits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"Sources: IGN, 2018\n"</span>,</span>
<span>    <span class="st">"mapsf "</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"mapsf"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="mapsf_files/figure-html/mf_init-1.png" width="480"></p>
</div>
<div class="section level3">
<h3 id="proportional-symbols">Proportional Symbols<a class="anchor" aria-label="anchor" href="#proportional-symbols"></a>
</h3>
<p><code>mf_map(x, var, type = "prop")</code> displays symbols with
areas proportional to a quantitative variable (stocks). The
<code>inches</code> argument is used to customize the symbols sizes.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/riatelab/mapsf/" class="external-link">mapsf</a></span><span class="op">)</span></span>
<span><span class="co"># import the sample data set</span></span>
<span><span class="va">mtq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mf_get_mtq.html">mf_get_mtq</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># Initiate a base map</span></span>
<span><span class="fu"><a href="../reference/mf_init.html">mf_init</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mtq</span>, theme <span class="op">=</span> <span class="st">"iceberg"</span><span class="op">)</span></span>
<span><span class="co"># Plot a shadow</span></span>
<span><span class="fu"><a href="../reference/mf_shadow.html">mf_shadow</a></span><span class="op">(</span><span class="va">mtq</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># plot municipalities</span></span>
<span><span class="fu"><a href="../reference/mf_map.html">mf_map</a></span><span class="op">(</span><span class="va">mtq</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># plot population</span></span>
<span><span class="fu"><a href="../reference/mf_map.html">mf_map</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">mtq</span>,</span>
<span>  var <span class="op">=</span> <span class="st">"POP"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"prop"</span>,</span>
<span>  inches <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  col <span class="op">=</span> <span class="st">"brown4"</span>,</span>
<span>  leg_pos <span class="op">=</span> <span class="st">"bottomleft2"</span>,</span>
<span>  leg_title <span class="op">=</span> <span class="st">"Total population"</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># layout</span></span>
<span><span class="fu"><a href="../reference/mf_layout.html">mf_layout</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"Population Distribution in Martinique"</span>,</span>
<span>  credits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"Sources: Insee and IGN, 2018\n"</span>,</span>
<span>    <span class="st">"mapsf "</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"mapsf"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="mapsf_files/figure-html/mf_prop-1.png" width="480"></p>
</div>
<div class="section level3">
<h3 id="choropleth-map">Choropleth Map<a class="anchor" aria-label="anchor" href="#choropleth-map"></a>
</h3>
<p>In choropleth maps, areas are shaded according to the variation of a
quantitative variable. They are used to represent ratios or
indices.<br><code>mf_map(x, var, type = "choro")</code> displays choropleth maps .
Arguments <code>nbreaks</code>, and <code>breaks</code> allow to
customize the variable classification. <code><a href="../reference/mf_get_breaks.html">mf_get_breaks()</a></code>
allows to classify data outside of the function itself. Colors palettes,
defined with <code>pal</code>, can be created with
<code><a href="../reference/mf_get_pal.html">mf_get_pal()</a></code> or you can use palette names from
<code><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">hcl.pals()</a></code>.</p>
<p>Use <code><a href="../reference/mf_theme.html">mf_theme()</a></code> to set a theme without plotting
anything.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/riatelab/mapsf/" class="external-link">mapsf</a></span><span class="op">)</span></span>
<span><span class="co"># import the sample data set</span></span>
<span><span class="va">mtq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mf_get_mtq.html">mf_get_mtq</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># population density (inhab./km2) using sf::st_area()</span></span>
<span><span class="va">mtq</span><span class="op">$</span><span class="va">POPDENS</span> <span class="op">&lt;-</span> <span class="fl">1e6</span> <span class="op">*</span> <span class="va">mtq</span><span class="op">$</span><span class="va">POP</span> <span class="op">/</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html" class="external-link">st_area</a></span><span class="op">(</span><span class="va">mtq</span><span class="op">)</span></span>
<span><span class="co"># set a theme</span></span>
<span><span class="fu"><a href="../reference/mf_theme.html">mf_theme</a></span><span class="op">(</span><span class="st">"green"</span><span class="op">)</span></span>
<span><span class="co"># plot population density</span></span>
<span><span class="fu"><a href="../reference/mf_map.html">mf_map</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">mtq</span>,</span>
<span>  var <span class="op">=</span> <span class="st">"POPDENS"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"choro"</span>,</span>
<span>  breaks <span class="op">=</span> <span class="st">"geom"</span>,</span>
<span>  nbreaks <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  pal <span class="op">=</span> <span class="st">"Greens"</span>,</span>
<span>  border <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  lwd <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  leg_pos <span class="op">=</span> <span class="st">"topright"</span>,</span>
<span>  leg_title <span class="op">=</span> <span class="st">"Population Density\n(people per km2)"</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># layout</span></span>
<span><span class="fu"><a href="../reference/mf_layout.html">mf_layout</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"Population Distribution in Martinique"</span>,</span>
<span>  credits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"Sources: Insee and IGN, 2018\n"</span>,</span>
<span>    <span class="st">"mapsf "</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"mapsf"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="mapsf_files/figure-html/mf_map_c-1.png" width="480"></p>
</div>
<div class="section level3">
<h3 id="typology-map">Typology Map<a class="anchor" aria-label="anchor" href="#typology-map"></a>
</h3>
<p><code>mf_map(x, var, type = "typo")</code> displays a typology map of
a qualitative variable. <code>val_order</code> is used to set the
modalities order in the legend.</p>
<p><code><a href="../reference/mf_label.html">mf_label()</a></code> displays labels on the map.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/riatelab/mapsf/" class="external-link">mapsf</a></span><span class="op">)</span></span>
<span><span class="co"># import the sample data set</span></span>
<span><span class="va">mtq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mf_get_mtq.html">mf_get_mtq</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># set theme</span></span>
<span><span class="fu"><a href="../reference/mf_theme.html">mf_theme</a></span><span class="op">(</span><span class="st">"dark"</span><span class="op">)</span></span>
<span><span class="co"># plot administrative status</span></span>
<span><span class="fu"><a href="../reference/mf_map.html">mf_map</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">mtq</span>,</span>
<span>  var <span class="op">=</span> <span class="st">"STATUS"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"typo"</span>,</span>
<span>  pal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"aquamarine4"</span>, <span class="st">"yellow3"</span>, <span class="st">"wheat"</span><span class="op">)</span>,</span>
<span>  lwd <span class="op">=</span> <span class="fl">.5</span>,</span>
<span>  val_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Prefecture"</span>,</span>
<span>    <span class="st">"Sub-prefecture"</span>,</span>
<span>    <span class="st">"Simple municipality"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  leg_pos <span class="op">=</span> <span class="st">"topright"</span>,</span>
<span>  leg_title <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># labels for a few  municipalities</span></span>
<span><span class="fu"><a href="../reference/mf_label.html">mf_label</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">mtq</span><span class="op">[</span><span class="va">mtq</span><span class="op">$</span><span class="va">STATUS</span> <span class="op">!=</span> <span class="st">"Simple municipality"</span>, <span class="op">]</span>, var <span class="op">=</span> <span class="st">"LIBGEO"</span>,</span>
<span>  cex <span class="op">=</span> <span class="fl">0.9</span>, halo <span class="op">=</span> <span class="cn">TRUE</span>, r <span class="op">=</span> <span class="fl">0.15</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># layout</span></span>
<span><span class="fu"><a href="../reference/mf_layout.html">mf_layout</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"Administrative Status"</span>,</span>
<span>  credits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"Sources: Insee and IGN, 2018\n"</span>,</span>
<span>    <span class="st">"mapsf "</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"mapsf"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="mapsf_files/figure-html/mf_map_t-1.png" width="480"></p>
</div>
<div class="section level3">
<h3 id="proportional-symbols-using-choropleth-coloration">Proportional Symbols using Choropleth Coloration<a class="anchor" aria-label="anchor" href="#proportional-symbols-using-choropleth-coloration"></a>
</h3>
<p><code>mf_map(x, var, type = "prop_choro")</code> creates a map of
symbols that are proportional to values of a first variable and colored
to reflect the classification of a second variable.</p>
<p><code>expandBB</code> argument in <code><a href="../reference/mf_init.html">mf_init()</a></code> allows to
expand the map space. Here, we increase the space available on the right
of the map to avoid overlaps between the legends and the map.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/riatelab/mapsf/" class="external-link">mapsf</a></span><span class="op">)</span></span>
<span><span class="co"># import the sample data set</span></span>
<span><span class="va">mtq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mf_get_mtq.html">mf_get_mtq</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># set theme</span></span>
<span><span class="fu"><a href="../reference/mf_init.html">mf_init</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mtq</span>, theme <span class="op">=</span> <span class="st">"candy"</span>, expandBB <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">.15</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Plot a shadow</span></span>
<span><span class="fu"><a href="../reference/mf_shadow.html">mf_shadow</a></span><span class="op">(</span><span class="va">mtq</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># Plot the municipalities</span></span>
<span><span class="fu"><a href="../reference/mf_map.html">mf_map</a></span><span class="op">(</span><span class="va">mtq</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># Plot symbols with choropleth coloration</span></span>
<span><span class="fu"><a href="../reference/mf_map.html">mf_map</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">mtq</span>,</span>
<span>  var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"POP"</span>, <span class="st">"MED"</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"prop_choro"</span>,</span>
<span>  border <span class="op">=</span> <span class="st">"grey50"</span>,</span>
<span>  lwd <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  leg_pos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"topright"</span>, <span class="st">"right"</span><span class="op">)</span>,</span>
<span>  leg_title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Population"</span>, <span class="st">"Median\nIncome\n(in euros)"</span><span class="op">)</span>,</span>
<span>  breaks <span class="op">=</span> <span class="st">"equal"</span>,</span>
<span>  nbreaks <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  pal <span class="op">=</span> <span class="st">"Greens"</span>,</span>
<span>  leg_val_rnd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="op">-</span><span class="fl">2</span><span class="op">)</span>,</span>
<span>  leg_frame <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># layout</span></span>
<span><span class="fu"><a href="../reference/mf_layout.html">mf_layout</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"Population &amp; Wealth in Martinique, 2015"</span>,</span>
<span>  credits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"Sources: Insee and IGN, 2018\n"</span>,</span>
<span>    <span class="st">"mapsf "</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"mapsf"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  frame <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="mapsf_files/figure-html/mf_map_pc-1.png" width="480"></p>
</div>
<div class="section level3">
<h3 id="proportional-symbols-using-typology-coloration">Proportional Symbols using Typology Coloration<a class="anchor" aria-label="anchor" href="#proportional-symbols-using-typology-coloration"></a>
</h3>
<p><code>f_map(x, var, type = "prop_typo")</code> creates a map of
symbols that are proportional to values of a first variable and colored
to reflect the modalities of a second qualitative variable.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/riatelab/mapsf/" class="external-link">mapsf</a></span><span class="op">)</span></span>
<span><span class="co"># import the sample data set</span></span>
<span><span class="va">mtq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mf_get_mtq.html">mf_get_mtq</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># set theme</span></span>
<span><span class="fu"><a href="../reference/mf_init.html">mf_init</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mtq</span>, theme <span class="op">=</span> <span class="st">"ink"</span>, expandBB <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">.15</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Plot a shadow</span></span>
<span><span class="fu"><a href="../reference/mf_shadow.html">mf_shadow</a></span><span class="op">(</span><span class="va">mtq</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># Plot the municipalities</span></span>
<span><span class="fu"><a href="../reference/mf_map.html">mf_map</a></span><span class="op">(</span><span class="va">mtq</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># Plot symbols with choropleth coloration</span></span>
<span><span class="fu"><a href="../reference/mf_map.html">mf_map</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">mtq</span>,</span>
<span>  var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"POP"</span>, <span class="st">"STATUS"</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"prop_typo"</span>,</span>
<span>  symbol <span class="op">=</span> <span class="st">"square"</span>,</span>
<span>  border <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  lwd <span class="op">=</span> <span class="fl">.5</span>,</span>
<span>  leg_pos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"right"</span>, <span class="st">"topright"</span><span class="op">)</span>,</span>
<span>  leg_title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Population"</span>, <span class="st">"Administrative\nStatus"</span><span class="op">)</span>,</span>
<span>  val_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Prefecture"</span>, <span class="st">"Sub-prefecture"</span>,</span>
<span>    <span class="st">"Simple municipality"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># layout</span></span>
<span><span class="fu"><a href="../reference/mf_layout.html">mf_layout</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"Population Distribution in Martinique"</span>,</span>
<span>  credits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"Sources: Insee and IGN, 2018\n"</span>,</span>
<span>    <span class="st">"mapsf "</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"mapsf"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="mapsf_files/figure-html/mf_map_pt-1.png" width="480"></p>
</div>
<div class="section level3">
<h3 id="label-map">Label Map<a class="anchor" aria-label="anchor" href="#label-map"></a>
</h3>
<p><code><a href="../reference/mf_label.html">mf_label()</a></code> is dedicated to the display of labels on a
map. The <code>overlap = FALSE</code> argument displays non overlapping
labels.</p>
<p>In this example we have built a custom theme with
<code><a href="../reference/mf_theme.html">mf_theme()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/riatelab/mapsf/" class="external-link">mapsf</a></span><span class="op">)</span></span>
<span><span class="co"># import the sample data set</span></span>
<span><span class="va">mtq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mf_get_mtq.html">mf_get_mtq</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># set theme</span></span>
<span><span class="va">my_theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"mytheme"</span>,</span>
<span>  bg <span class="op">=</span> <span class="st">"lightblue1"</span>,</span>
<span>  fg <span class="op">=</span> <span class="st">"darkseagreen4"</span>,</span>
<span>  mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  tab <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  pos <span class="op">=</span> <span class="st">"left"</span>,</span>
<span>  inner <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  line <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  cex <span class="op">=</span> <span class="fl">.9</span>,</span>
<span>  font <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/mf_theme.html">mf_theme</a></span><span class="op">(</span><span class="va">my_theme</span><span class="op">)</span></span>
<span><span class="co"># plot municipalities</span></span>
<span><span class="fu"><a href="../reference/mf_map.html">mf_map</a></span><span class="op">(</span><span class="va">mtq</span>, col <span class="op">=</span> <span class="st">"#e4e9de"</span>, border <span class="op">=</span> <span class="st">"darkseagreen4"</span><span class="op">)</span></span>
<span><span class="co"># plot labels</span></span>
<span><span class="fu"><a href="../reference/mf_label.html">mf_label</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">mtq</span>,</span>
<span>  var <span class="op">=</span> <span class="st">"LIBGEO"</span>,</span>
<span>  col <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  cex <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>  font <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  halo <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  bg <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  r <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  overlap <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  lines <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># layout</span></span>
<span><span class="fu"><a href="../reference/mf_layout.html">mf_layout</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"Municipalities of Martinique"</span>,</span>
<span>  credits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"Sources: Insee and IGN, 2018\n"</span>,</span>
<span>    <span class="st">"mapsf "</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"mapsf"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  arrow <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># north arrow</span></span>
<span><span class="fu"><a href="../reference/mf_arrow.html">mf_arrow</a></span><span class="op">(</span>pos <span class="op">=</span> <span class="st">"topright"</span><span class="op">)</span></span></code></pre></div>
<p><img src="mapsf_files/figure-html/mf_label-1.png" width="480"></p>
</div>
<div class="section level3">
<h3 id="links-map">Links Map<a class="anchor" aria-label="anchor" href="#links-map"></a>
</h3>
<p><code><a href="../reference/mf_get_links.html">mf_get_links()</a></code> creates a link layer from an
<code>sf</code> object and a link <code>data.frame</code> (long
format).</p>
<p><code>mf_map(x, var, type = "grad")</code> displays graduated
links.</p>
<p>We have used <code>leg_pos = "bottomleft2"</code> to display the
legend in the bottom left corner of the map with an extra space to avoid
overlaps between the legend and the credits.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/riatelab/mapsf/" class="external-link">mapsf</a></span><span class="op">)</span></span>
<span><span class="co"># import the sample data set</span></span>
<span><span class="va">mtq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mf_get_mtq.html">mf_get_mtq</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># import the csv file embedded in mapsf</span></span>
<span><span class="va">mob</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"csv/mob.csv"</span>, package <span class="op">=</span> <span class="st">"mapsf"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Select links from Fort-de-France (97209))</span></span>
<span><span class="va">mob_97209</span> <span class="op">&lt;-</span> <span class="va">mob</span><span class="op">[</span><span class="va">mob</span><span class="op">$</span><span class="va">i</span> <span class="op">==</span> <span class="fl">97209</span>, <span class="op">]</span></span>
<span><span class="co"># create an sf object of links</span></span>
<span><span class="va">mob_links</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mf_get_links.html">mf_get_links</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mtq</span>, df <span class="op">=</span> <span class="va">mob_97209</span><span class="op">)</span></span>
<span><span class="co"># set figure background color</span></span>
<span><span class="co"># set theme</span></span>
<span><span class="fu"><a href="../reference/mf_init.html">mf_init</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">mtq</span>, theme <span class="op">=</span> <span class="st">"dark"</span><span class="op">)</span></span>
<span><span class="co"># Plot a shadow</span></span>
<span><span class="fu"><a href="../reference/mf_shadow.html">mf_shadow</a></span><span class="op">(</span><span class="va">mtq</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># Plot the municipalities</span></span>
<span><span class="fu"><a href="../reference/mf_map.html">mf_map</a></span><span class="op">(</span><span class="va">mtq</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># plot graduated links</span></span>
<span><span class="fu"><a href="../reference/mf_map.html">mf_map</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">mob_links</span>,</span>
<span>  var <span class="op">=</span> <span class="st">"fij"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"grad"</span>,</span>
<span>  breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">4679.0</span><span class="op">)</span>,</span>
<span>  lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">8</span><span class="op">)</span>,</span>
<span>  leg_pos <span class="op">=</span> <span class="st">"bottomleft2"</span>,</span>
<span>  leg_title <span class="op">=</span> <span class="st">"Nb. of\nCommuters"</span>,</span>
<span>  col <span class="op">=</span> <span class="st">"red4"</span>,</span>
<span>  leg_frame <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># map layout</span></span>
<span><span class="fu"><a href="../reference/mf_layout.html">mf_layout</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"Commuting to Fort-de-France"</span>,</span>
<span>  credits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"Sources: Insee and IGN, 2018\n"</span>,</span>
<span>    <span class="st">"mapsf "</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"mapsf"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  arrow <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="mapsf_files/figure-html/mf_grad-1.png" width="480"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Timothée Giraud.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
